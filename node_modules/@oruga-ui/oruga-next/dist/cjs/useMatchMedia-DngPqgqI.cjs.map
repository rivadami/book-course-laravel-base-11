{"version":3,"file":"useMatchMedia-DngPqgqI.cjs","sources":["../../src/composables/useMatchMedia.ts"],"sourcesContent":["import { getCurrentInstance, ref } from \"vue\";\nimport { getOption } from \"@/utils/config\";\nimport { useEventListener } from \"./useEventListener\";\nimport { isClient } from \"@/utils/ssr\";\n\n/**\n * Checks if the match media is mobile.\n * @param mobileBreakpoint px breakpoint\n */\nexport function useMatchMedia(mobileBreakpoint?: string) {\n    const isMobile = ref(false);\n    const mediaQuery = ref();\n\n    // getting a hold of the internal instance in setup()\n    const vm = getCurrentInstance();\n    if (!vm)\n        throw new Error(\n            \"useMatchMedia must be called within a component setup function.\",\n        );\n    // get component props\n    const props = vm.props;\n\n    const configField = vm.proxy?.$options.configField;\n    if (!configField)\n        throw new Error(\"component must define the 'configField' option.\");\n\n    // get mobileBreakpoint width value\n    let width = props.mobileBreakpoint;\n    if (!width) {\n        const defaultWidth = getOption(\n            `mobileBreakpoint`,\n            mobileBreakpoint || \"1023px\",\n        );\n\n        width = getOption(`${configField}.mobileBreakpoint`, defaultWidth);\n    }\n\n    // define match media query ref\n    mediaQuery.value = isClient\n        ? window.matchMedia(`(max-width: ${width})`)\n        : undefined;\n\n    if (mediaQuery.value) {\n        isMobile.value = mediaQuery.value.matches;\n        useEventListener(\"change\", onMatchMedia, mediaQuery.value);\n    } else {\n        isMobile.value = false;\n    }\n\n    function onMatchMedia(event: any): void {\n        isMobile.value = event.matches;\n    }\n\n    return { isMobile };\n}\n"],"names":["ref","getCurrentInstance","getOption","isClient","useEventListener"],"mappings":";;;;;;AASO,SAAS,cAAc,kBAA2B;;AAC/C,QAAA,WAAWA,QAAI,KAAK;AAC1B,QAAM,aAAaA,IAAAA;AAGnB,QAAM,KAAKC,IAAAA;AACX,MAAI,CAAC;AACD,UAAM,IAAI;AAAA,MACN;AAAA,IAAA;AAGR,QAAM,QAAQ,GAAG;AAEX,QAAA,eAAc,QAAG,UAAH,mBAAU,SAAS;AACvC,MAAI,CAAC;AACK,UAAA,IAAI,MAAM,iDAAiD;AAGrE,MAAI,QAAQ,MAAM;AAClB,MAAI,CAAC,OAAO;AACR,UAAM,eAAeC,OAAA;AAAA,MACjB;AAAA,MACA,oBAAoB;AAAA,IAAA;AAGxB,YAAQA,OAAU,UAAA,GAAG,WAAW,qBAAqB,YAAY;AAAA,EACrE;AAGA,aAAW,QAAQC,eACb,OAAO,WAAW,eAAe,KAAK,GAAG,IACzC;AAEN,MAAI,WAAW,OAAO;AACT,aAAA,QAAQ,WAAW,MAAM;AACjBC,qBAAAA,iBAAA,UAAU,cAAc,WAAW,KAAK;AAAA,EAAA,OACtD;AACH,aAAS,QAAQ;AAAA,EACrB;AAEA,WAAS,aAAa,OAAkB;AACpC,aAAS,QAAQ,MAAM;AAAA,EAC3B;AAEA,SAAO,EAAE,SAAS;AACtB;;"}