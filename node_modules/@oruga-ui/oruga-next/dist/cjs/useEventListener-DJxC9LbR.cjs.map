{"version":3,"file":"useEventListener-DJxC9LbR.cjs","sources":["../../src/composables/useEventListener.ts"],"sourcesContent":["import {\n    onBeforeUnmount,\n    onMounted,\n    type MaybeRefOrGetter,\n    type Component,\n} from \"vue\";\nimport { isObject } from \"@/utils/helpers\";\nimport { unrefElement } from \"./unrefElement\";\n\ntype EventTarget = Element | Document | Window | Component;\ntype EventListenerOptions = AddEventListenerOptions & {\n    /** Register event listener immediate or on mounted hook. */\n    immediate?: boolean;\n};\n\n/**\n * Register DOM events using addEventListener on mounted, and removeEventListener automatically on unmounted.\n * Adaption of {@link  https://vueuse.org/core/useEventListener}\n *\n * @param event event name\n * @param listener event listener function\n * @param el default docuemnt\n * @return stop function\n */\nexport function useEventListener(\n    event: string,\n    listener: (evt?: any) => any,\n    el: MaybeRefOrGetter<EventTarget> = document,\n    options?: EventListenerOptions,\n): () => void {\n    let cleanup: () => void;\n\n    const register = (): void => {\n        if (!el) return;\n\n        const target = unrefElement(el);\n        // create a clone of options, to avoid it being changed reactively on removal\n        const optionsClone = isObject(options) ? { ...options } : options;\n        target.addEventListener(event, listener, optionsClone);\n        cleanup = (): void =>\n            target.removeEventListener(event, listener, optionsClone);\n    };\n\n    const stop = (): void => {\n        if (typeof cleanup === \"function\") cleanup();\n    };\n\n    if (options?.immediate) register();\n    else {\n        onMounted(() => register());\n        onBeforeUnmount(() => stop());\n    }\n\n    return stop;\n}\n"],"names":["unrefElement","isObject","onMounted","onBeforeUnmount"],"mappings":";;;;;AAwBO,SAAS,iBACZ,OACA,UACA,KAAoC,UACpC,SACU;AACN,MAAA;AAEJ,QAAM,WAAW,MAAY;AACzB,QAAI,CAAC;AAAI;AAEH,UAAA,SAASA,0BAAa,EAAE;AAE9B,UAAM,eAAeC,QAAAA,SAAS,OAAO,IAAI,EAAE,GAAG,QAAY,IAAA;AACnD,WAAA,iBAAiB,OAAO,UAAU,YAAY;AACrD,cAAU,MACN,OAAO,oBAAoB,OAAO,UAAU,YAAY;AAAA,EAAA;AAGhE,QAAM,OAAO,MAAY;AACrB,QAAI,OAAO,YAAY;AAAoB;EAAA;AAG/C,MAAI,mCAAS;AAAoB;OAC5B;AACSC,kBAAA,MAAM,UAAU;AACVC,wBAAA,MAAM,MAAM;AAAA,EAChC;AAEO,SAAA;AACX;;"}