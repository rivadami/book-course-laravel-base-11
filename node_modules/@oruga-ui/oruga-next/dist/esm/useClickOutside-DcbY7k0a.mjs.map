{"version":3,"file":"useClickOutside-DcbY7k0a.mjs","sources":["../../src/composables/useClickOutside.ts"],"sourcesContent":["import { type MaybeRefOrGetter } from \"vue\";\nimport { useEventListener } from \"./useEventListener\";\nimport { unrefElement } from \"./unrefElement\";\n\n/**\n * Listen for clicks outside of an element.\n * Adaption of {@link https://vueuse.org/core/onClickOutside}\n *\n * @param target Target element\n * @param handler Event handler\n * @param ignore Element to ignore\n * @return stop function\n */\nexport function useClickOutside(\n    target: MaybeRefOrGetter,\n    handler: (evt: PointerEvent) => void,\n    ignore: (MaybeRefOrGetter | string)[] = [],\n): () => void {\n    if (!window) return;\n\n    /**\n     * White-listed items that not emit event when clicked.\n     * All children from ignore prop.\n     */\n    const shouldIgnore = (event: PointerEvent): boolean => {\n        return ignore.some((target) => {\n            if (typeof target === \"string\") {\n                return Array.from(\n                    window.document.querySelectorAll(target),\n                ).some(\n                    (el) =>\n                        el === event.target ||\n                        event.composedPath().includes(el),\n                );\n            } else {\n                const el = unrefElement(target);\n                return (\n                    el &&\n                    (event.target === el || event.composedPath().includes(el))\n                );\n            }\n        });\n    };\n\n    const listener = (event: PointerEvent): void => {\n        const el = unrefElement(target);\n        if (!el || el === event.target || event.composedPath().includes(el))\n            return;\n        if (shouldIgnore(event)) return;\n        handler(event);\n    };\n\n    const stop = useEventListener(\"click\", listener, window, {\n        immediate: true,\n        passive: true,\n    });\n\n    return stop;\n}\n"],"names":["target"],"mappings":";;;;AAaO,SAAS,gBACZ,QACA,SACA,SAAwC,CAAA,GAC9B;AACV,MAAI,CAAC;AAAQ;AAMP,QAAA,eAAe,CAAC,UAAiC;AAC5C,WAAA,OAAO,KAAK,CAACA,YAAW;AACvB,UAAA,OAAOA,YAAW,UAAU;AAC5B,eAAO,MAAM;AAAA,UACT,OAAO,SAAS,iBAAiBA,OAAM;AAAA,QAAA,EACzC;AAAA,UACE,CAAC,OACG,OAAO,MAAM,UACb,MAAM,aAAA,EAAe,SAAS,EAAE;AAAA,QAAA;AAAA,MACxC,OACG;AACG,cAAA,KAAK,aAAaA,OAAM;AAE1B,eAAA,OACC,MAAM,WAAW,MAAM,MAAM,eAAe,SAAS,EAAE;AAAA,MAEhE;AAAA,IAAA,CACH;AAAA,EAAA;AAGC,QAAA,WAAW,CAAC,UAA8B;AACtC,UAAA,KAAK,aAAa,MAAM;AAC1B,QAAA,CAAC,MAAM,OAAO,MAAM,UAAU,MAAM,aAAA,EAAe,SAAS,EAAE;AAC9D;AACJ,QAAI,aAAa,KAAK;AAAG;AACzB,YAAQ,KAAK;AAAA,EAAA;AAGjB,QAAM,OAAO,iBAAiB,SAAS,UAAU,QAAQ;AAAA,IACrD,WAAW;AAAA,IACX,SAAS;AAAA,EAAA,CACZ;AAEM,SAAA;AACX;"}